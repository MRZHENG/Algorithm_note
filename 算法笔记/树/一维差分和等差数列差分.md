## ä¸€ç»´å·®åˆ†

#### é€‚ç”¨åœºæ™¯

â€‹         å½“æˆ‘ä»¬å¯¹ä¸€æ®µæ•°ç»„ï¼Œ**åœ¨å„ä¸ªåŒºé—´è¿›è¡Œè¿ç»­çš„å¢åŠ å’Œå‡å°‘æ•°ï¼Œå¹¶ä¸”ä¸å»æ±‚ä¸­é—´ç»“æœçš„æƒ…å†µï¼ˆå¦‚æœè¦ï¼Œé‚£å°±éœ€è¦çº¿æ®µæ ‘å»è§£å†³ï¼‰**, æœ€åå°†è¿™ä¸ªç»“æœä¿å­˜çš„æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨ä¸€ç»´å·®åˆ†ã€‚ä¸æ”¯æŒè¾¹æ“ä½œã€è¾¹æŸ¥è¯¢ã€‚

#### æ€ä¹ˆåšï¼Ÿ

â€‹      **[i ..... j]   +3**    array[i] +3   **array**[j+1]    **èµ·å§‹ä½ç½®åŠ ï¼Œæœ«å°¾ä½ç½®çš„æœ€åä½ç½®å‡å°‘ï¼Œæœ€åæ±‚å‰ç¼€å’Œ**

### [1109. èˆªç­é¢„è®¢ç»Ÿè®¡](https://leetcode.cn/problems/corporate-flight-bookings/)

è¿™é‡Œæœ‰ `n` ä¸ªèˆªç­ï¼Œå®ƒä»¬åˆ†åˆ«ä» `1` åˆ° `n` è¿›è¡Œç¼–å·ã€‚

æœ‰ä¸€ä»½èˆªç­é¢„è®¢è¡¨ `bookings` ï¼Œè¡¨ä¸­ç¬¬ `i` æ¡é¢„è®¢è®°å½• `bookings[i] = [firsti, lasti, seatsi]` æ„å‘³ç€åœ¨ä» `firsti` åˆ° `lasti` ï¼ˆ**åŒ…å«** `firsti` å’Œ `lasti` ï¼‰çš„ **æ¯ä¸ªèˆªç­** ä¸Šé¢„è®¢äº† `seatsi` ä¸ªåº§ä½ã€‚

è¯·ä½ è¿”å›ä¸€ä¸ªé•¿åº¦ä¸º `n` çš„æ•°ç»„ `answer`ï¼Œé‡Œé¢çš„å…ƒç´ æ˜¯æ¯ä¸ªèˆªç­é¢„å®šçš„åº§ä½æ€»æ•°ã€‚ 

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šbookings = [[1,2,10],[2,3,20],[2,5,25]], n = 5
è¾“å‡ºï¼š[10,55,45,25,25]
è§£é‡Šï¼š
èˆªç­ç¼–å·        1   2   3   4   5
é¢„è®¢è®°å½• 1 ï¼š   10  10
é¢„è®¢è®°å½• 2 ï¼š       20  20
é¢„è®¢è®°å½• 3 ï¼š       25  25  25  25
æ€»åº§ä½æ•°ï¼š      10  55  45  25  25
å› æ­¤ï¼Œanswer = [10,55,45,25,25]
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šbookings = [[1,2,10],[2,2,15]], n = 2
è¾“å‡ºï¼š[10,25]
è§£é‡Šï¼š
èˆªç­ç¼–å·        1   2
é¢„è®¢è®°å½• 1 ï¼š   10  10
é¢„è®¢è®°å½• 2 ï¼š       15
æ€»åº§ä½æ•°ï¼š      10  25
å› æ­¤ï¼Œanswer = [10,25]
```

**æç¤ºï¼š**

- `1 <= n <= 2 * 104`
- `1 <= bookings.length <= 2 * 104`
- `bookings[i].length == 3`
- `1 <= firsti <= lasti <= n`
- `1 <= seatsi <= 104`



```c++
class Solution {
public:
    vector<int> corpFlightBookings(vector<vector<int>>& bookings, int n) {
      vector<int>temp;
      temp.resize(n+2); // è®¾ç«‹åˆå§‹é•¿åº¦ å»¶é•¿æœ€åä½ç½®æ˜¯ä¸ºäº†é¿å…è¾¹ç•Œè®¨è®º
      for(vector<int>&cur:bookings){
        temp[cur[0]] += cur[2]; //èµ·å§‹ä½ç½®åŠ å½±å“
        temp[cur[1]+1] -= cur[2]; //æœ«çš„åä¸€ä¸ªä½ç½®å‡å°‘å½±å“
      }
      // ç´¯åŠ å‰ç¼€å’Œ
      int sum = 0; 
      for(int i = 0 ;i<temp.size();i++){
        sum+=temp[i];
        temp[i] = sum;
      }
      // èµ‹å€¼è¿”å›
      vector<int>ans;
      ans.resize(n);
      for(int i = 0;i<n;i++){
         ans[i] = temp[i+1];
      }
      return ans;
    }
};
```

### ä¸€ç»´å·®åˆ†

ç­‰å·®æ•°åˆ—å·®åˆ†é—®é¢˜æè¿°ï¼š
ä¸€å¼€å§‹1~nèŒƒå›´ä¸Šçš„æ•°å­—éƒ½æ˜¯0ã€‚æ¥ä¸‹æ¥ä¸€å…±æœ‰mä¸ªæ“ä½œã€‚
æ¯æ¬¡æ“ä½œï¼šl~rèŒƒå›´ä¸Šä¾æ¬¡åŠ ä¸Šé¦–é¡¹sã€æœ«é¡¹eã€å…¬å·®dçš„æ•°åˆ—
æœ€ç»ˆ1~nèŒƒå›´ä¸Šçš„æ¯ä¸ªæ•°å­—éƒ½è¦æ­£ç¡®å¾—åˆ°

```c++
// ä½ æœ‰ä¸€ä¸ªé•¿ä¸º n çš„æ•°ç»„ aï¼Œä¸€å¼€å§‹æ‰€æœ‰å…ƒç´ å‡ä¸º 0ã€‚
// ç»™å®šä¸€äº›åŒºé—´æ“ä½œï¼Œå…¶ä¸­ queries[i] = [left, right, x]ï¼Œ
// ä½ éœ€è¦æŠŠå­æ•°ç»„ a[left], a[left+1], ... a[right] éƒ½åŠ ä¸Š xã€‚
// è¿”å›æ‰€æœ‰æ“ä½œæ‰§è¡Œå®Œåçš„æ•°ç»„ aã€‚
vector<int> solve(int n, vector<vector<int>> queries) {
    vector<int> diff(n); // å·®åˆ†æ•°ç»„
    for (auto &q: queries) {
        int left = q[0], right = q[1], x = q[2];
        diff[left] += x;
        if (right + 1 < n) {
            diff[right + 1] -= x;
        }
    }
    for (int i = 1; i < n; i++) {
        diff[i] += diff[i - 1]; // ç›´æ¥åœ¨å·®åˆ†æ•°ç»„ä¸Šå¤åŸæ•°ç»„ a
    }
    return diff;
}


```

### [2381. å­—æ¯ç§»ä½ II](https://leetcode.cn/problems/shifting-letters-ii/)

ç»™ä½ ä¸€ä¸ªå°å†™è‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸² `s` å’Œä¸€ä¸ªäºŒç»´æ•´æ•°æ•°ç»„ `shifts` ï¼Œå…¶ä¸­ `shifts[i] = [starti, endi, directioni]` ã€‚å¯¹äºæ¯ä¸ª `i` ï¼Œå°† `s` ä¸­ä»ä¸‹æ ‡ `starti` åˆ°ä¸‹æ ‡ `endi` ï¼ˆä¸¤è€…éƒ½åŒ…å«ï¼‰æ‰€æœ‰å­—ç¬¦éƒ½è¿›è¡Œç§»ä½è¿ç®—ï¼Œå¦‚æœ `directioni = 1` å°†å­—ç¬¦å‘åç§»ä½ï¼Œå¦‚æœ `directioni = 0` å°†å­—ç¬¦å‘å‰ç§»ä½ã€‚

å°†ä¸€ä¸ªå­—ç¬¦ **å‘å** ç§»ä½çš„æ„æ€æ˜¯å°†è¿™ä¸ªå­—ç¬¦ç”¨å­—æ¯è¡¨ä¸­ **ä¸‹ä¸€ä¸ª** å­—æ¯æ›¿æ¢ï¼ˆå­—æ¯è¡¨è§†ä¸ºç¯ç»•çš„ï¼Œæ‰€ä»¥ `'z'` å˜æˆ `'a'`ï¼‰ã€‚ç±»ä¼¼çš„ï¼Œå°†ä¸€ä¸ªå­—ç¬¦ **å‘å‰** ç§»ä½çš„æ„æ€æ˜¯å°†è¿™ä¸ªå­—ç¬¦ç”¨å­—æ¯è¡¨ä¸­ **å‰ä¸€ä¸ª** å­—æ¯æ›¿æ¢ï¼ˆå­—æ¯è¡¨æ˜¯ç¯ç»•çš„ï¼Œæ‰€ä»¥ `'a'` å˜æˆ `'z'` ï¼‰ã€‚

è¯·ä½ è¿”å›å¯¹ `s` è¿›è¡Œæ‰€æœ‰ç§»ä½æ“ä½œä»¥åå¾—åˆ°çš„æœ€ç»ˆå­—ç¬¦ä¸²ã€‚

 

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šs = "abc", shifts = [[0,1,0],[1,2,1],[0,2,1]]
è¾“å‡ºï¼š"ace"
è§£é‡Šï¼šé¦–å…ˆï¼Œå°†ä¸‹æ ‡ä» 0 åˆ° 1 çš„å­—æ¯å‘å‰ç§»ä½ï¼Œå¾—åˆ° s = "zac" ã€‚
ç„¶åï¼Œå°†ä¸‹æ ‡ä» 1 åˆ° 2 çš„å­—æ¯å‘åç§»ä½ï¼Œå¾—åˆ° s = "zbd" ã€‚
æœ€åï¼Œå°†ä¸‹æ ‡ä» 0 åˆ° 2 çš„å­—ç¬¦å‘åç§»ä½ï¼Œå¾—åˆ° s = "ace" ã€‚
```

**ç¤ºä¾‹ 2:**

```
è¾“å…¥ï¼šs = "dztz", shifts = [[0,0,0],[1,1,1]]
è¾“å‡ºï¼š"catz"
è§£é‡Šï¼šé¦–å…ˆï¼Œå°†ä¸‹æ ‡ä» 0 åˆ° 0 çš„å­—æ¯å‘å‰ç§»ä½ï¼Œå¾—åˆ° s = "cztz" ã€‚
æœ€åï¼Œå°†ä¸‹æ ‡ä» 1 åˆ° 1 çš„å­—ç¬¦å‘åç§»ä½ï¼Œå¾—åˆ° s = "catz" ã€‚
```

 

**æç¤ºï¼š**

- `1 <= s.length, shifts.length <= 5 * 104`

- `shifts[i].length == 3`

- `0 <= starti <= endi < s.length`

- `0 <= directioni <= 1`

- `s` åªåŒ…å«å°å†™è‹±æ–‡å­—æ¯ã€‚

   ```c++
   class Solution {
   public:
       string shiftingLetters(string s, vector<vector<int>>& shifts) {
           vector<int> diff(s.size() + 1, 0);
           for (auto& it : shifts) {
               int x = it[2] * 2 - 1;
               diff[it[0]] += x;
               diff[it[1] + 1] -= x;
           }
           int sum = 0;
           for (int i = 0; i < diff.size(); i++) {
               sum += diff[i];
               diff[i] = sum;
           }
           // å½“å‰å‰ç¼€å’Œä¸ºåç§»é‡
           int shift = 0;
           for (int i = 0; i < s.size(); i++) {
               shift = diff[i] % 26 + 26;  //  è¿™é‡Œæ•°å­—å–æ¨¡æ˜¯zh
               s[i] = (s[i] - 'a' + shift) % 26 + 'a';
           }
           return s;
       }
   };
   
   ```

   

### **ç­‰å·®æ•°åˆ—å·®åˆ†çš„è¿‡ç¨‹**ï¼š

æ¯ä¸ªæ“ä½œè°ƒç”¨**set**æ–¹æ³•
**æ‰€æœ‰æ“ä½œå®Œæˆååœ¨** array ä¸Šç”Ÿæˆä¸¤éå‰ç¼€å’Œï¼Œå³è°ƒç”¨**build**æ–¹æ³•
array é‡Œå°±æ˜¯æœ€ç»ˆ1~nèŒƒå›´ä¸Šçš„æ¯ä¸ªæ•°å­—

```c++
void set (int l ,int r, int s,int e ,int d){
    arr[l] = s;           
    arr[l+1] = d-s;
    arr[r+1] = -e-d;
    arr[r+2] = e;
}
```



```c++
// ä¸¤æ¬¡å‰ç¼€å’Œå åŠ 
void build(){
    for(int i = 1; i<=n;i++){
        arr[i]+=arr[i-1];
    }
   for(int i = 1; i<=n;i++){
        arr[i]+=arr[i-1];
    }
}
```



#### ç†è§£è¿‡ç¨‹ï¼Œå®Œå…¨å€’æ¨

![065E2A0CAD2190A8B0D04AA421982D6C](D:\OneDrive\æ–‡æ¡£\Tencent Files\3471818487\FileRecv\MobileFile\065E2A0CAD2190A8B0D04AA421982D6C.png)





#### [P4231 ä¸‰æ­¥å¿…æ€ - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn)](https://www.luogu.com.cn/problem/P4231)

# ä¸‰æ­¥å¿…æ€

## é¢˜ç›®æè¿°

### é—®é¢˜æ‘˜è¦ï¼š

*N*ä¸ªæŸ±å­æ’æˆä¸€æ’ï¼Œä¸€å¼€å§‹æ¯ä¸ªæŸ±å­æŸä¼¤åº¦ä¸º0ã€‚

æ¥ä¸‹æ¥å‹‡ä»ªä¼šè¿›è¡Œğ‘€*M*æ¬¡æ”»å‡»ï¼Œæ¯æ¬¡æ”»å‡»å¯ä»¥ç”¨4ä¸ªå‚æ•°ğ‘™*l*,ğ‘Ÿ*r*,ğ‘ *s*,ğ‘’*e*æ¥æè¿°ï¼š

è¡¨ç¤ºè¿™æ¬¡æ”»å‡»ä½œç”¨èŒƒå›´ä¸ºç¬¬ğ‘™*l*ä¸ªåˆ°ç¬¬ğ‘Ÿ*r*ä¸ªä¹‹é—´æ‰€æœ‰çš„æŸ±å­(åŒ…å«ğ‘™*l*,ğ‘Ÿ*r*)ï¼Œå¯¹ç¬¬ä¸€ä¸ªæŸ±å­çš„ä¼¤å®³ä¸ºğ‘ *s*ï¼Œå¯¹æœ€åä¸€ä¸ªæŸ±å­çš„ä¼¤å®³ä¸ºğ‘’*e*ã€‚

æ”»å‡»äº§ç”Ÿçš„ä¼¤å®³å€¼æ˜¯ä¸€ä¸ªç­‰å·®æ•°åˆ—ã€‚è‹¥ğ‘™=1*l*=1,ğ‘Ÿ=5*r*=5,ğ‘ =2*s*=2,ğ‘’=10*e*=10ï¼Œåˆ™å¯¹ç¬¬1~5ä¸ªæŸ±å­åˆ†åˆ«äº§ç”Ÿ2,4,6,8,10çš„ä¼¤å®³ã€‚

é¬¼æ—ä»¬éœ€è¦çš„æ˜¯æ‰€æœ‰æ”»å‡»å®Œæˆä¹‹åæ¯ä¸ªæŸ±å­çš„æŸä¼¤åº¦ã€‚

## è¾“å…¥æ ¼å¼

ç¬¬ä¸€è¡Œ2ä¸ªæ•´æ•°ğ‘*N*,ğ‘€*M*ï¼Œç”¨ç©ºæ ¼éš”å¼€ï¼Œä¸‹åŒã€‚

æ¥ä¸‹æ¥ğ‘€*M*è¡Œï¼Œæ¯è¡Œ4ä¸ªæ•´æ•°ğ‘™*l*,ğ‘Ÿ*r*,ğ‘ *s*,ğ‘’*e*ï¼Œå«ä¹‰è§é¢˜ç›®æè¿°ã€‚

æ•°æ®ä¿è¯å¯¹æ¯ä¸ªæŸ±å­äº§ç”Ÿçš„æ¯æ¬¡ä¼¤å®³å€¼éƒ½æ˜¯æ•´æ•°ã€‚

## è¾“å‡ºæ ¼å¼

ç”±äºè¾“å‡ºæ•°æ®å¯èƒ½è¿‡å¤§æ— æ³•å…¨éƒ¨è¾“å‡ºï¼Œä¸ºäº†ç¡®ä¿ä½ çœŸçš„èƒ½ç»´æŠ¤æ‰€æœ‰æŸ±å­çš„æŸä¼¤åº¦ï¼Œåªè¦è¾“å‡ºå®ƒä»¬çš„å¼‚æˆ–å’Œä¸æœ€å¤§å€¼å³å¯ã€‚

ï¼ˆå¼‚æˆ–å’Œå°±æ˜¯æ‰€æœ‰æ•°å­—æŒ‰ä½å¼‚æˆ–èµ·æ¥çš„å€¼ï¼‰

ï¼ˆå¼‚æˆ–è¿ç®—ç¬¦åœ¨c++é‡Œä¸º^ï¼‰

## æ ·ä¾‹ #1

### æ ·ä¾‹è¾“å…¥ #1

```
5 2
1 5 2 10
2 4 1 1
```

### æ ·ä¾‹è¾“å‡º #1

```
3 10
```

## æ ·ä¾‹ #2

### æ ·ä¾‹è¾“å…¥ #2

```
6 2
1 5 2 10
2 4 1 1
```

### æ ·ä¾‹è¾“å‡º #2

```
3 10
```

## æç¤º

### æ ·ä¾‹è§£é‡Šï¼š

æ ·ä¾‹1ï¼š

ç¬¬ä¸€æ¬¡æ”»å‡»äº§ç”Ÿçš„ä¼¤å®³:2 4 6 8 10

ç¬¬äºŒæ¬¡æ”»å‡»äº§ç”Ÿçš„ä¼¤å®³:0 1 1 1 0

æ‰€æœ‰æ”»å‡»ç»“æŸåæ¯ä¸ªæŸ±å­çš„æŸä¼¤ç¨‹åº¦:2 5 7 9 10ã€‚

è¾“å‡ºå¼‚æˆ–å’Œä¸æœ€å¤§å€¼ï¼Œå°±æ˜¯3 10ã€‚

æ ·ä¾‹2ï¼š

æ²¡æœ‰æ‰“åˆ°ç¬¬å…­æ ¹æŸ±å­ï¼Œç­”æ¡ˆä¸å˜

### æ•°æ®èŒƒå›´ï¼š

æœ¬é¢˜æ»¡åˆ†ä¸º100åˆ†ï¼Œä¸‹é¢æ˜¯4ä¸ªå­ä»»åŠ¡ã€‚(x/y)è¡¨ç¤º(å¾—åˆ†/æµ‹è¯•ç‚¹æ•°é‡)

å¦–ç²¾çº§(18/3):1â©½ğ‘›1â©½*n*,ğ‘šâ©½1000*m*â©½1000ã€‚è¿™ç§å·¥ä½œå³ä½¿åƒå¦–ç²¾ä¸€æ ·ç©ç©é—¹é—¹ä¹Ÿèƒ½å®Œæˆå§ï¼Ÿ

æ²³ç«¥çº§(10/1):ğ‘ =ğ‘’*s*=*e*,è¿™å¯ä»¥ä»£æ›¿æˆ‘å·¥ä½œå—ï¼Ÿ

å¤©ç‹—çº§(20/4):1â©½ğ‘›â©½1051â©½*n*â©½105,1â©½ğ‘šâ©½1051â©½*m*â©½105ã€‚å°æ‰“å°é—¹ä¸å†å¯è¡Œäº†å‘¢ã€‚

é¬¼ç¥çº§(52/2):æ²¡æœ‰ç‰¹æ®Šé™åˆ¶ã€‚è¦çœŸæ­£å¼€å§‹æ€è€ƒäº†ã€‚

ä»¥ä¸Šå››éƒ¨åˆ†æ•°æ®ä¸ç›¸äº¤ã€‚

å¯¹äºå…¨éƒ¨çš„æ•°æ®:1â©½ğ‘›â©½1071â©½*n*â©½107,1â©½ğ‘šâ©½3Ã—1051â©½*m*â©½3Ã—105ï¼Œ1â©½ğ‘™<ğ‘Ÿâ©½ğ‘›1â©½*l*<*r*â©½*n*.

æ‰€æœ‰è¾“å…¥è¾“å‡ºæ•°æ®ä»¥åŠæŸ±å­å—æŸä¼¤ç¨‹åº¦å§‹ç»ˆåœ¨[0,9Ã—1018][0,9Ã—1018]èŒƒå›´å†…ã€‚

### æç¤ºï¼š

ç”±äºç§ç§åŸå› ï¼Œæ—¶é—´é™åˆ¶å¯èƒ½ä¼šæ¯”è¾ƒç´§ï¼ŒC++é€‰æ‰‹è¯·ä¸è¦ä½¿ç”¨cinè¯»å…¥æ•°æ®ã€‚

```c++
#include<iostream>
using namespace std;
#define 10000010
long long arr[MAXN];

int n,m;
//          æ·»åŠ å½±å“s æ¶ˆé™¤å½±å“æ·»åŠ d  æ¶ˆé™¤dæ·»åŠ -e æ¶ˆé™¤-eçš„yin'x
//            L                   R    R+1   R+2
// ç¬¬ä¸€æ¬¡ä¸º    s -s+d   0     0    0    -d-e   e
// ä¸­é—´è¿‡ç¨‹ä¸º  s   d    d     d    d    -e     0
// æœ€å       s  s+d  s+2d  s+3d  s+4d  0     0
void set(int l,int r,int s,int e,int d){
    arr[l]+=s;
    arr[l+1] += d-s;
    arr[r+1] += -e-d;
    arr[r+2] += e;
}

void build(){
    for(int i = 1;i<=n;i++){
        arr[i]+=arr[i-1];
    }
    for(int i = 1;i<=n;i++){
        arr[i]+=arr[i-1];
    }
}

int main() {
	ios_base::sync_with_stdio(0);
	cin.tie(0);
	cout.tie(0);
	// è¾“å…¥
	while (cin >> n >> m) {
		fill(arr, arr + n + 2, 0);  // æ¸…ç†è„æ•°æ®
		int l, r, s, e;
		int d;
		while (m--) {
			cin >> l >> r >> s >> e;
			d = (e - s) / (r - l);
			set(l, r, s, e, d);
		}
		build();
		long long max_val = 0, xor_val = 0;
		for (int i = 1; i <= n; i++) {
			max_val = max(max_val, arr[i]);
			xor_val ^= arr[i];
		}
		cout << xor_val << " " << max_val;
	}
	return 0;
}


```



#### [P5026 Lycanthropy - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn)](https://www.luogu.com.cn/problem/P5026)

## é¢˜ç›®èƒŒæ™¯

å°æ­£æ–¹å½¢äº²çœ¼çœ‹è§äº†è‡ªå·±æ˜”æ—¥çš„æœ‹å‹è¢«å·è¿›äº†é»‘æš—çš„æ·±æ¸Šï¼Œç„¶è€Œå®ƒæ— åŠ›é˜»æ­¢â€¦â€¦

ç°åœ¨å®ƒçš„æœ‹å‹å·²ç»å‘å®ƒå‘èµ·äº†æ”»å‡»ï¼Œå› æ­¤å°æ­£æ–¹å½¢ä¸å¾—ä¸æŠµæŠ—ã€‚

## é¢˜ç›®æè¿°

æˆ‘ä»¬æŠŠå±±é¡¶ä¸Šçš„æ¹–æ³Šçœ‹ä½œä¸€æ¡é•¿åº¦ä¸º ğ‘š*m* çš„ç›´çº¿ï¼Œä¸€å¼€å§‹æ°´æ·±éƒ½åœ¨æ°´å¹³çº¿ä¸Šï¼Œæˆ‘ä»¬è§†ä½œæ­¤æ—¶çš„æ°´æ·±ä¸º '0'

æ¥ä¸‹æ¥ï¼Œåœ¨ä¸€ç¬é—´ï¼Œå°æ­£æ–¹å½¢çš„"æœ‹å‹"ä»¬è·³èµ·å¹¶æ‰å…¥æ°´ä¸­ï¼Œå¯¼è‡´åœ¨å…¥æ°´ç‚¹çš„æ°´é™ä½è€Œè¿œç¦»å…¥æ°´ç‚¹çš„æ°´å‡é«˜ï¼Œæ³¨æ„ä¸¤ä¸ª "æœ‹å‹" å¯èƒ½åœ¨åŒä¸€åœ°ç‚¹å…¥æ°´ã€‚

å°æ­£æ–¹å½¢çš„æ¯ä¸ªæœ‹å‹æœ‰ä¸€ä¸ªä½“ç§¯æ•°å€¼ ğ‘£*v*ï¼Œå½“ä½“ç§¯ä¸º ğ‘£*v* çš„ä¸€ä¸ªæœ‹å‹è·³å…¥æ°´ä¸­ï¼Œæˆ‘ä»¬è®¾å…¥æ°´ç‚¹ä¸º ğ‘–*i*ï¼Œå°†ä¼šå¯¼è‡´ ğ‘–âˆ’ğ‘£+1*i*âˆ’*v*+1 åˆ° ğ‘–*i* çš„æ°´ä½ä¾æ¬¡é™ä½ 1,2,â‹¯â€‰,ğ‘£1,2,â‹¯,*v*

åŒæ ·åœ°ï¼Œç¬¬ ğ‘–*i* åˆ° ğ‘–+ğ‘£âˆ’1*i*+*v*âˆ’1 çš„æ°´ä½ä¼šä¾æ¬¡é™ä½ ğ‘£,ğ‘£âˆ’1,â‹¯â€‰,1*v*,*v*âˆ’1,â‹¯,1.

ç›¸å¯¹åº”åœ°ï¼Œğ‘–âˆ’ğ‘£*i*âˆ’*v* çš„æ°´ä½ä¸å˜ï¼Œ ğ‘–âˆ’ğ‘£âˆ’1*i*âˆ’*v*âˆ’1 åˆ° ğ‘–âˆ’2âˆ—ğ‘£*i*âˆ’2âˆ—*v* æ°´ä½ä¾æ¬¡å¢åŠ  1,2,â‹¯â€‰,ğ‘£1,2,â‹¯,*v*ï¼Œ ğ‘–âˆ’2âˆ—ğ‘£*i*âˆ’2âˆ—*v* åˆ° ğ‘–âˆ’3âˆ—ğ‘£+1*i*âˆ’3âˆ—*v*+1 æ°´ä½ä¾æ¬¡å¢åŠ  ğ‘£,ğ‘£âˆ’1,â‹¯â€‰,1*v*,*v*âˆ’1,â‹¯,1

åŒæ ·ï¼Œğ‘–+ğ‘£*i*+*v* æ°´ä½ä¸å˜ï¼Œğ‘–+ğ‘£+1*i*+*v*+1 åˆ° ğ‘–+2âˆ—ğ‘£*i*+2âˆ—*v* æ°´ä½å¢åŠ  1,2,â‹¯â€‰,ğ‘£1,2,â‹¯,*v*ï¼Œğ‘–+2âˆ—ğ‘£*i*+2âˆ—*v* åˆ° ğ‘–+3âˆ—ğ‘£âˆ’1*i*+3âˆ—*v*âˆ’1 æ°´ä½ä¾æ¬¡å¢åŠ  ğ‘£,ğ‘£âˆ’1,â‹¯â€‰,1*v*,*v*âˆ’1,â‹¯,1

ç°åœ¨å°æ­£æ–¹å½¢æƒ³è¦ç©¿è¿‡è¿™ä¸ªæ¹–ï¼Œä»–æƒ³è¦çŸ¥é“åœ¨è¿™ ğ‘›*n* ä¸ª"æœ‹å‹"è·³å…¥æ°´ä¸­åæ¹–ä¸Šæ¯ä¸ªèŠ‚ç‚¹çš„æ°´ä½ï¼Œä½ èƒ½å¸®å¸®å®ƒå—ï¼Ÿ

## è¾“å…¥æ ¼å¼

ç¬¬ä¸€è¡Œä¸ºä¸¤ä¸ªæ•´æ•° ğ‘›*n*,ğ‘š*m*ï¼Œè¡¨ç¤º"æœ‹å‹"çš„æ•°ç›®ä¸æ¹–æ³Šçš„å®½åº¦ã€‚

æ¥ä¸‹æ¥ ğ‘›*n* è¡Œï¼Œä¸€è¡Œä¸¤ä¸ªæ•´æ•° ğ‘£,ğ‘¥ï¼Œè¡¨ç¤ºç¬¬ ğ‘–+1ä¸ªæœ‹å‹çš„ä½“ç§¯ä¸å…¥æ°´ç‚¹ã€‚

## è¾“å‡ºæ ¼å¼

ä¸€è¡Œ ğ‘š*m* ä¸ªæ•´æ•°ï¼Œç¬¬ ğ‘–ä¸ªæ•´æ•°è¡¨ç¤º ğ‘–å·ä½çš„æ°´æ·±ã€‚

## è¾“å…¥è¾“å‡ºæ ·ä¾‹

**è¾“å…¥ #1**å¤åˆ¶

```
1 10
1 5
```

**è¾“å‡º #1**å¤åˆ¶

```
0 0 1 0 -1 0 1 0 0 0 
```

**è¾“å…¥ #2**å¤åˆ¶

```
2 10
2 6
3 1
```

**è¾“å‡º #2**å¤åˆ¶

```
-2 0 0 0 0 0 2 2 2 2
```

## è¯´æ˜/æç¤º

å¯¹äº 30% çš„æ•°æ®ï¼Œğ‘›<=50,ğ‘š<=500*n*<=50,*m*<=500

å¯¹äº 70% çš„æ•°æ®ï¼Œğ‘›<=105,ğ‘š<=105*n*<=105,*m*<=105

å¯¹äº 100% çš„æ•°æ®ï¼Œğ‘›<=106,ğ‘š<=106,1<=ğ‘£<=10000,1<=ğ‘¥<=ğ‘š*n*<=106,*m*<=106,1<=*v*<=10000,1<=*x*<=*m*



### æ€è·¯ï¼š

æ˜¯ç”±å¤šä¸ªç­‰å·®æ•°ç»„å åŠ èµ·æ¥çš„ï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„è¾¹ç•Œé—®é¢˜çš„è®¨è®ºï¼Œæœ‰å¯èƒ½ä¸ºè´Ÿæ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨æ•°ç»„å·¦å³ä¸¤è¾¹åˆ†åˆ«å¼€ä¸€äº›ç©ºé—´å»æ’é™¤è¶Šç•Œé—®é¢˜

```c++
#include<iostream>
using namespace std;
#include<vector>
#define MAXN 10000010
#define offset 30000
vector<int> arr(offset+MAXN+offset);

int n; 
int m;
//            L                   R    R+1   R+2
// ç¬¬ä¸€æ¬¡ä¸º   s -s+d   0     0    0    -d-e   e
// ä¸­é—´è¿‡ç¨‹ä¸º s   d    d     d    d    -e     0
// æœ€å       s  s+d  s+2d  s+3d  s+4d  0     0

// è¿™é‡Œæ˜¯æ¨¡æ¿åŠ ä¸Šäº†è¾¹ç•Œï¼Œä½¿å¾—æ•°ç»„ç§»åŠ¨äº†offsetä½
void set(int l ,int r,int s,int e,int d) {
	arr[l + offset] += s;
	arr[l +1 +offset] += -s + d;
	arr[r +1 +offset] += -d - e;
	arr[r +2 +offset] += e;
}       

//æœ€åçš„buildæ–¹æ³•ï¼Œé€šè¿‡ä¸¤æ¬¡å‰ç¼€å’Œç›¸åŠ ï¼Œä½¿å¾—å½¢æˆå¯¹åº”çš„æ°´ä½
void build() {
	for (int i = 1; i <= m+offset; i++) {
		arr[i] += arr[i - 1];
	}
	for (int i = 1; i <= m+offset; i++) {
		arr[i] += arr[i - 1];
	}
}

int main() {
	// m ç›¸å½“äºsize
	ios_base::sync_with_stdio(0);
	cin.tie(0);
	cout.tie(0);
	cin >> n >> m;

	fill(arr.begin(),arr.end(), 0);
	int v, x;
	while (n--) {
		cin >> v >> x;   // v æ˜¯ä½“ç§¯ , xæ˜¯åæ ‡
		set(x - 3 * v , x - 2 * v - 1 , 0, v - 1, 1);
		set(x - 2 * v , x , v, -v, -1);
		set(x+1 , x + 2 * v , -v+1, v, 1);
		set(x + 2 * v + 1 , x + 3 * v , v - 1, 0, -1);
	}
	build();
    // æœ¬æ¥ä» 1 - m è¾“å‡º å˜æˆä» 1+offset - m+offset è¾“å‡º
	for (int i = offset+1; i <= m+offset; i++) {
	  cout << arr[i] << " ";
	 }
	// è¾“å…¥
	return 0;
}
```

