## å‰ç¼€å’Œä¿¡æ¯

### [303. åŒºåŸŸå’Œæ£€ç´¢ - æ•°ç»„ä¸å¯å˜](https://leetcode.cn/problems/range-sum-query-immutable/)

ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„  `nums`ï¼Œå¤„ç†ä»¥ä¸‹ç±»å‹çš„å¤šä¸ªæŸ¥è¯¢:

1. è®¡ç®—ç´¢å¼• `left` å’Œ `right` ï¼ˆåŒ…å« `left` å’Œ `right`ï¼‰ä¹‹é—´çš„ `nums` å…ƒç´ çš„ **å’Œ** ï¼Œå…¶ä¸­ `left <= right`

å®ç° `NumArray` ç±»ï¼š

- `NumArray(int[] nums)` ä½¿ç”¨æ•°ç»„ `nums` åˆå§‹åŒ–å¯¹è±¡
- `int sumRange(int i, int j)` è¿”å›æ•°ç»„ `nums` ä¸­ç´¢å¼• `left` å’Œ `right` ä¹‹é—´çš„å…ƒç´ çš„ **æ€»å’Œ** ï¼ŒåŒ…å« `left` å’Œ `right` ä¸¤ç‚¹ï¼ˆä¹Ÿå°±æ˜¯ `nums[left] + nums[left + 1] + ... + nums[right]` )

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼š
["NumArray", "sumRange", "sumRange", "sumRange"]
[[[-2, 0, 3, -5, 2, -1]], [0, 2], [2, 5], [0, 5]]
è¾“å‡ºï¼š
[null, 1, -1, -3]

è§£é‡Šï¼š
NumArray numArray = new NumArray([-2, 0, 3, -5, 2, -1]);
numArray.sumRange(0, 2); // return 1 ((-2) + 0 + 3)
numArray.sumRange(2, 5); // return -1 (3 + (-5) + 2 + (-1)) 
numArray.sumRange(0, 5); // return -3 ((-2) + 0 + 3 + (-5) + 2 + (-1))
```

**æç¤ºï¼š**

- `1 <= nums.length <= 104`
- `-105 <= nums[i] <= 105`
- `0 <= i <= j < nums.length`
- æœ€å¤šè°ƒç”¨ `104` æ¬¡ `sumRange` æ–¹æ³•



```c++
#define MAXN 10001
class NumArray {
public:
    NumArray(vector<int>& nums) {
      sum[0] = 0;  //sumçš„ç¼–å·è¡¨ç¤ºå¤šå°‘ä¸ªæ•°å­—ç›¸åŠ çš„å’Œ 
      //æ„å»ºsumå‰ç¼€å’Œ  
      for(int i = 0, j = 1; i < nums.size(); i++, j++) {
        sum[j] = sum[j-1] + nums[i];
       }
    }
    
    int sumRange(int left, int right) {
        return sum[right+1] - sum[left];  // left 2  åœ¨numså·²ç»3ä¸ªæ•°,è€Œåœ¨sumé‡Œé¢è¡¨ç¤º2ä¸ªæ•°
                                          // right4  åœ¨numså·²ç»5ä¸ªæ•°ï¼Œè€Œåœ¨sumåªæœ‰4ä¸ªæ•°
    }

    int sum[MAXN];
};

```



### [560. å’Œä¸º K çš„å­æ•°ç»„](https://leetcode.cn/problems/subarray-sum-equals-k/)

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` å’Œä¸€ä¸ªæ•´æ•° `k` ï¼Œè¯·ä½ ç»Ÿè®¡å¹¶è¿”å› *è¯¥æ•°ç»„ä¸­å’Œä¸º `k` çš„å­æ•°ç»„çš„ä¸ªæ•°* ã€‚

å­æ•°ç»„æ˜¯æ•°ç»„ä¸­å…ƒç´ çš„è¿ç»­éç©ºåºåˆ—ã€‚

 

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [1,1,1], k = 2
è¾“å‡ºï¼š2
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [1,2,3], k = 3
è¾“å‡ºï¼š2
```

 **æç¤ºï¼š**

- `1 <= nums.length <= 2 * 104`

- `-1000 <= nums[i] <= 1000`

- `-107 <= k <= 107`

- #### æ€è·¯ï¼š

   æšä¸¾ä»0 åˆ° i ä½ç½®ï¼Œæ‰€æœ‰å­æ•°ç»„å’Œä¸ºkçš„ä¸ªæ•°ï¼Œç„¶åå–æœ€å¤§å€¼å³å¯

   **ä½¿ç”¨map, key å€¼ä¸ºsumï¼Œvalueä¸ºæ¬¡æ•°**

   å‡è®¾ ä»0 åˆ° i ä½ç½®çš„æ€»å’Œä¸º12ï¼Œ k ä¸º 5  ï¼Œ é‚£å°±æ‰¾ 7 å‡ºç°çš„æ¬¡æ•° 

   é‚£ä¹ˆå› ä¸ºæ¯æ¬¡iä½ç½®çš„suméƒ½å¯èƒ½ä¸ä¸€æ ·ï¼Œæ‰€ä»¥è¦æ‰¾æ¯ä¸ªiä½ç½®æ˜¯å­æ•°ç»„çš„ä¸ªæ•°ï¼Œç„¶å

```c++
 int subarraySum(const std::vector<int>& nums, int aim) {
    std::unordered_map<int, int> map;
    // 0è¿™ä¸ªå‰ç¼€å’Œï¼Œåœ¨æ²¡æœ‰ä»»ä½•æ•°å­—çš„æ—¶å€™ï¼Œå·²ç»æœ‰1æ¬¡äº†
    map[0] = 1;
    int ans = 0;
    int sum = 0;

    for (int num : nums) {
        // sum : 0...iå‰ç¼€å’Œ
        sum += num;
        if (map.find(sum - aim) != map.end()) {
            ans += map[sum - aim];
        }
        map[sum] = map[sum] + 1; // map[sum]ä¸å­˜åœ¨æ—¶ä¼šé»˜è®¤åˆå§‹åŒ–ä¸º0
    }

    return ans;
}
```



### [æœªæ’åºæ•°ç»„ä¸­ç´¯åŠ å’Œä¸ºç»™å®šå€¼çš„æœ€é•¿å­æ•°ç»„ç³»åˆ—é—®é¢˜è¡¥1_ç‰›å®¢é¢˜éœ¸_ç‰›å®¢ç½‘ (nowcoder.com)](https://www.nowcoder.com/practice/545544c060804eceaed0bb84fcd992fb)

## æè¿°

ç»™å®šä¸€ä¸ªæ— åºæ•°ç»„arrï¼Œå…¶ä¸­å…ƒç´ å¯æ­£ã€å¯è´Ÿã€å¯0ã€‚æ±‚arræ‰€æœ‰å­æ•°ç»„ä¸­æ­£æ•°ä¸è´Ÿæ•°ä¸ªæ•°ç›¸ç­‰çš„æœ€é•¿å­æ•°ç»„çš„é•¿åº¦ã€‚

[è¦æ±‚]

æ—¶é—´å¤æ‚åº¦ä¸ºğ‘‚(ğ‘›)*O*(*n*)ï¼Œç©ºé—´å¤æ‚åº¦ä¸ºğ‘‚(ğ‘›)*O*(*n*)

### è¾“å…¥æè¿°ï¼š

ç¬¬ä¸€è¡Œä¸€ä¸ªæ•´æ•°Nï¼Œè¡¨ç¤ºæ•°ç»„é•¿åº¦
æ¥ä¸‹æ¥ä¸€è¡Œæœ‰Nä¸ªæ•°è¡¨ç¤ºæ•°ç»„ä¸­çš„æ•°

### è¾“å‡ºæè¿°ï¼š

è¾“å‡ºä¸€ä¸ªæ•´æ•°è¡¨ç¤ºç­”æ¡ˆ

## ç¤ºä¾‹1

è¾“å…¥ï¼š

```
5
1 -2 1 1 1
```

å¤åˆ¶

è¾“å‡ºï¼š

```
2
```

å¤åˆ¶

## å¤‡æ³¨ï¼š

```
1â©½ğ‘â©½1051â©½Nâ©½105
âˆ’100â©½ğ‘ğ‘Ÿğ‘Ÿğ‘–â©½100âˆ’100â©½arriâ©½100
```

```c++
#include<iostream>
#include<vector>
#include<algorithm>
#include<cmath>
#include<string>
#include<map>
#include<unordered_map>
using namespace std;

#define MAXN 100001
int arr[MAXN];
// å› ä¸ºæ˜¯æ±‚arræ‰€æœ‰å­æ•°ä¸­æ­£æ•°ä¸è´Ÿæ•°ç›¸ç­‰çš„æœ€é•¿é•¿åº¦
// è®¾0 -  i ä¸ºsum ,aim = 0
// æˆ‘ä»¬å°±è¦å¯»æ‰¾æœ€æ—©å‡ºç°å’Œä¸ºsum çš„ä¸‹æ ‡ j
// é•¿åº¦ä¹Ÿå°±æ˜¯ i - j 
unordered_map<int, int>m1;
int find(int size, int* arr, int aim) {
    m1.clear();
    // ä¸€å¼€å§‹0å°±å‡ºç°äº†ï¼Œåœ¨ä¸‹æ ‡-1çš„ä½ç½®
    m1.insert({ 0,-1 });
    int sum = 0, ans = 0;
    for (int i = 0; i < size; i++) {
        sum += arr[i];
        // å‘ç°æœ‰æœ€æ—©å‡ºç°å’Œä¸ºsumçš„ä¸‹æ ‡
        if (m1.find(sum) != m1.end()) {
            ans = max(i - m1[sum], ans);
        }
        // å¦‚æœæ²¡æ‰¾åˆ°å°±æ’å…¥,ä¸‹æ ‡ä¸ºå½“å‰çš„i
        else {
            m1.insert({ sum,i });
        }
    }
    return ans;
}
int main() {
    ios_base::sync_with_stdio(0);
    cin.tie(0);
    int size;
    while (cin >> size) {
        int temp = size;
        int index = 0;
        while (temp--) {
            int num;
            cin >> num;
            arr[index++] = num > 0 ? 1 : (num == 0 ? 0 : -1);

        }
        int ans = find(size, arr, 0);
        cout << ans;
    }
}
```

**æ€è·¯ï¼š**

 å› ä¸ºæ˜¯æ±‚arræ‰€æœ‰å­æ•°ä¸­æ­£æ•°ä¸è´Ÿæ•°ç›¸ç­‰çš„æœ€é•¿é•¿åº¦
 è®¾0 -  i ä¸ºsum ,aim = 0
 æˆ‘ä»¬å°±è¦å¯»æ‰¾æœ€æ—©å‡ºç°å’Œä¸ºsum çš„ä¸‹æ ‡ j
 é•¿åº¦ä¹Ÿå°±æ˜¯ i - j ï¼Œç„¶åæšä¸¾å‡ºæ‰€æœ‰ä½ç½®ï¼Œæœ€åå°†ç­”æ¡ˆå–æœ€å¤§å€¼å³å¯ 





### [1124. è¡¨ç°è‰¯å¥½çš„æœ€é•¿æ—¶é—´æ®µ](https://leetcode.cn/problems/longest-well-performing-interval/)

ç»™ä½ ä¸€ä»½å·¥ä½œæ—¶é—´è¡¨ `hours`ï¼Œä¸Šé¢è®°å½•ç€æŸä¸€ä½å‘˜å·¥æ¯å¤©çš„å·¥ä½œå°æ—¶æ•°ã€‚

æˆ‘ä»¬è®¤ä¸ºå½“å‘˜å·¥ä¸€å¤©ä¸­çš„å·¥ä½œå°æ—¶æ•°å¤§äº `8` å°æ—¶çš„æ—¶å€™ï¼Œé‚£ä¹ˆè¿™ä¸€å¤©å°±æ˜¯ã€Œ**åŠ³ç´¯çš„ä¸€å¤©**ã€ã€‚

æ‰€è°“ã€Œè¡¨ç°è‰¯å¥½çš„æ—¶é—´æ®µã€ï¼Œæ„å‘³åœ¨è¿™æ®µæ—¶é—´å†…ï¼Œã€ŒåŠ³ç´¯çš„å¤©æ•°ã€æ˜¯ä¸¥æ ¼ **å¤§äº**ã€Œä¸åŠ³ç´¯çš„å¤©æ•°ã€ã€‚

è¯·ä½ è¿”å›ã€Œè¡¨ç°è‰¯å¥½æ—¶é—´æ®µã€çš„æœ€å¤§é•¿åº¦ã€‚

 

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šhours = [9,9,6,0,6,6,9]
è¾“å‡ºï¼š3
è§£é‡Šï¼šæœ€é•¿çš„è¡¨ç°è‰¯å¥½æ—¶é—´æ®µæ˜¯ [9,9,6]ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šhours = [6,6,6]
è¾“å‡ºï¼š0
```

**æç¤ºï¼š**

- `1 <= hours.length <= 104`
- `0 <= hours[i] <= 16`

```c++
#include<iostream>
#include<vector>
#include<algorithm>
#include<cmath>
#include<string>
#include<map>
#include<unordered_map>
using namespace std;

#define MAXN 10001

// æ€è·¯: çŠ¶æ€è½¬åŒ– å°†å¤§äº8çš„ä½œä¸º1, <=8ä½œä¸º-1
// å› ä¸ºæ˜¯è·å–æœ€å¤§é•¿åº¦,æ‰€ä»¥åªéœ€è¦éå†å³å¯ 

int arr[MAXN];
class Solution {
public:
    int longestWPI(vector<int>& hours) {
        int index = 0;
        for (auto& it : hours) {
            arr[index++] = it > 8 ? 1 : -1;
        }
        int size = index;
        find(size, arr, 1);
        return ans;
    }
    
    // å‡è®¾0 - i çš„å’Œ X å¦‚æœ>1 é‚£ä¹ˆ ans = i+1;
    // å‡è®¾0 - i çš„å’Œ X å¦‚æœ<1 é‚£ä¹ˆ ans = i - j ;  0 - j çš„å’Œ ä¸º X-1
    void find(int size, int* arr, int aim) {
        int sum = 0;
        unordered_map<int, int>map;
        map.insert({ 0, -1 }); // å’Œä¸º0 æœ€æ—©å‡ºç°åœ¨-1ä½ç½®
        for (int i = 0; i < size; i++) {
            sum += arr[i];
            if (sum >=1) {
                ans = max(ans, i + 1);
            }
            else {
                if (map.find(sum - 1) != map.end()) {
                    ans = max(ans, i - map[sum - 1]);
                }
            }
            if (map.find(sum) == map.end()) {
                map.insert({ sum, i });
            }
        }
    }
    int ans = 0;
};
```

**æ€è·¯ï¼š**

**é¦–å…ˆå…ˆå°†å¤§äº8çš„æ•°è½¬æˆ1ï¼Œå°äºç­‰äº8çš„æ•°è½¬æˆ-1ï¼Œå¦‚æœ0 - iä½ç½®çš„sumå¤§äº1ï¼Œ é‚£ä¹ˆå½“å‰æœ€å¤§å­æ•°ç»„çš„å¤§å°ä¸ºi+1ï¼Œå¦‚æœå½“å‰ä½ç½®çš„sumå°äº1ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾æœ€é•¿çš„å¤§äºç­‰äº1çš„ä½ç½®ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±é—´æ¥å¯»æ‰¾sum-1çš„ä¸‹æ ‡jï¼Œé‚£ä¹ˆæœ€å¤§å­æ•°ç»„çš„é•¿åº¦ i - j ï¼Œéå†æ‰€æœ‰ä½ç½®å‘å·¦å»¶ä¼¸çš„æœ€å¤§å­æ•°ç»„ï¼Œç»“æœä¸€å®šå«åœ¨é‡Œé¢ï¼Œå–æœ€å¤§å€¼**



### [1590. ä½¿æ•°ç»„å’Œèƒ½è¢« P æ•´é™¤](https://leetcode.cn/problems/make-sum-divisible-by-p/)

ç»™ä½ ä¸€ä¸ªæ­£æ•´æ•°æ•°ç»„ `nums`ï¼Œè¯·ä½ ç§»é™¤ **æœ€çŸ­** å­æ•°ç»„ï¼ˆå¯ä»¥ä¸º **ç©º**ï¼‰ï¼Œä½¿å¾—å‰©ä½™å…ƒç´ çš„ **å’Œ** èƒ½è¢« `p` æ•´é™¤ã€‚ **ä¸å…è®¸** å°†æ•´ä¸ªæ•°ç»„éƒ½ç§»é™¤ã€‚

è¯·ä½ è¿”å›ä½ éœ€è¦ç§»é™¤çš„æœ€çŸ­å­æ•°ç»„çš„é•¿åº¦ï¼Œå¦‚æœæ— æ³•æ»¡è¶³é¢˜ç›®è¦æ±‚ï¼Œè¿”å› `-1` ã€‚

**å­æ•°ç»„** å®šä¹‰ä¸ºåŸæ•°ç»„ä¸­è¿ç»­çš„ä¸€ç»„å…ƒç´ ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [3,1,4,2], p = 6
è¾“å‡ºï¼š1
è§£é‡Šï¼šnums ä¸­å…ƒç´ å’Œä¸º 10ï¼Œä¸èƒ½è¢« p æ•´é™¤ã€‚æˆ‘ä»¬å¯ä»¥ç§»é™¤å­æ•°ç»„ [4] ï¼Œå‰©ä½™å…ƒç´ çš„å’Œä¸º 6 ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [6,3,5,2], p = 9
è¾“å‡ºï¼š2
è§£é‡Šï¼šæˆ‘ä»¬æ— æ³•ç§»é™¤ä»»ä½•ä¸€ä¸ªå…ƒç´ ä½¿å¾—å’Œè¢« 9 æ•´é™¤ï¼Œæœ€ä¼˜æ–¹æ¡ˆæ˜¯ç§»é™¤å­æ•°ç»„ [5,2] ï¼Œå‰©ä½™å…ƒç´ ä¸º [6,3]ï¼Œå’Œä¸º 9 ã€‚
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šnums = [1,2,3], p = 3
è¾“å‡ºï¼š0
è§£é‡Šï¼šå’Œæ°å¥½ä¸º 6 ï¼Œå·²ç»èƒ½è¢« 3 æ•´é™¤äº†ã€‚æ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦ç§»é™¤ä»»ä½•å…ƒç´ ã€‚
```

**ç¤ºä¾‹ 4ï¼š**

```
è¾“å…¥ï¼šnums = [1,2,3], p = 7
è¾“å‡ºï¼š-1
è§£é‡Šï¼šæ²¡æœ‰ä»»ä½•æ–¹æ¡ˆä½¿å¾—ç§»é™¤å­æ•°ç»„åå‰©ä½™å…ƒç´ çš„å’Œè¢« 7 æ•´é™¤ã€‚
```

**ç¤ºä¾‹ 5ï¼š**

```
è¾“å…¥ï¼šnums = [1000000000,1000000000,1000000000], p = 3
è¾“å‡ºï¼š0
```

**æç¤ºï¼š**

- `1 <= nums.length <= 105`
- `1 <= nums[i] <= 109`
- `1 <= p <= 109`



```c++
class Solution {
public:
    int minSubarray(vector<int>& nums, int p) {
        // æ•´ä½“ä½™æ•°
        int mod = 0;
        for (int num : nums) {
            mod = (mod + num) % p;
        }
        if (mod == 0) {
            return 0;
        }

        // key : å‰ç¼€å’Œ%pçš„ä½™æ•°
        // value : æœ€æ™šå‡ºç°çš„ä½ç½®
        unordered_map<int, int> map;
        map[0] = -1;
        int ans = INT_MAX;
        for (int i = 0, cur = 0, find; i < nums.size(); i++) {
            // 0...iè¿™éƒ¨åˆ†çš„ä½™æ•°
            cur = (cur + nums[i]) % p;
            find = cur >= mod ? (cur - mod) : (cur + p - mod);
            if (map.find(find) != map.end()) {
                ans = min(ans, i - map[find]);
            }
            map[cur] = i;
        }
        return ans == nums.size() ? -1 : ans;
    }
};
```

