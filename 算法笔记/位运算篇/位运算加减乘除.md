## 进位逻辑设计

​          **所有相加的逻辑都要处理进位这个问题**，只有当进位为0 ，才能完成加法的操作

#### 关于二进制设置加减乘除系统的代码

#####         1. 加法逻辑的设计 （要处理进位的）

​              **加法操作 =  无进位相加 + 进位信息**

​         

```cpp
//函数参数列表设置成常量引用，方便引入字面值常量
//原因：由函数功能得知，我们不希望改变原来相加的两个元素的值
int add(const int& x, const int& y) {
	int a = x;
	int b = y;
    //假设b = 0 和 进位信息为 0 就结束，所以这俩个逻辑可以合并
	int ans = a;
	//当进位信息为 0 的时候结果就算好了，以及第一次来b!=0的情况
	while (b != 0)
    {
		ans = a ^ b;//无进位相加
		b = (a & b) << 1; //将b变成进位信息，保留进位信息，查看是否存在进位
		a = ans;
	}
	return ans;
}
```

#####          2.减法逻辑的设计

​            也就是 a-b = a+ （-b）的逻辑

​      由于我们要使用位运算的操作，所以采用取反加一的方式得到负数 **（注意任何一个类型的最小位都不能通过取反加一  的操作得到）**

​      

```cpp
 
   int minus(int a, int b) {
        return add(a, neg(b));
    }

    int neg(int n) {
        return add(~n, 1);
    }
```

#####         3.乘法逻辑的实现

​         形似我们平时日常使用 的表格法

```cpp
 int multiply(int a, int b) {
        int ans = 0;
        while (b != 0) {
            if ((b & 1) != 0) {
                // 考察b当前最右的状态！
                ans = add(ans, a);  //因为当b最右侧为1时候 
                                    //  10000110
                                    //* 00000101
                                    //___________
                                    //  10000110
                                    //ans=ans+ 1*a
            }
            //这下面的操作是将b按位来处理
            a <<= 1; 
            b >>= 1;
        }
        return ans;
    }
```

#####     4.除法逻辑的实现

```c++
// 必须保证a和b都不是整数最小值，返回a除以b的结果，因为要取反
     int div(int a, int b) {
        int x = a < 0 ? neg(a) : a;  
        int y = b < 0 ? neg(b) : b;
        int ans = 0;
         //为什么设置成31个循环？因为除了符号位以外，需要确定每个位上ans是否有1的存在
        for (int i = 30; i >= 0; i = minus(i, 1)) {
            if ((x >> i) >= y)//为什么不用 x>= y<<i ？
            {                 //为了规避y移动到符号位打破我们x，y大于0的设定
                ans |= (1 << i);
                x = minus(x, y << i);//再减去这个数
            }
        }
         //判断a，b符号返回值
        return a < 0 ^ b < 0 ? neg(ans) : ans;
    }
```

$$
x > y×2的30次方
$$

然后挨个处理，如果存在 x > y * 2 的 i次方，那么对应的位要赋值为1 ，然后再减去这个值